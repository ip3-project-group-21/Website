<!DOCTYPE HTML>
<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Weather viewer</title>

	<!--Stylesheet import for API pages-->
	<link rel="stylesheet" href="css/apipage.css">

	<!--Stylesheet import for footer-->
	<link rel="stylesheet" href="css/footer.css">

	<!--Stylesheet import for navbar-->
	<link rel="stylesheet" href="css/navbar.css">

	<!--Bootstrap framework import-->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
	 crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
	 crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
	 crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
	 crossorigin="anonymous"></script>

</head>

<body>

	<div id="page">
		<div class="intro container">
			<section class="page-title">
				<h1>Global Weather Viewer</h1>
			</section>

			<aside class="text desc text-justify">
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
					ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut
					aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu
					fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit
					anim id est laborum.</p>

			</aside>
			<aside class="text tut text-justify">
				<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt
					ut labore et dolore magna aliqua.</p>

				<a href="tutweather.html">
					<button type="button" class="btn btn-sm btn-outline-dark">Link to Tutorial Page</button>
				</a>
			</aside>
		</div>

		<div class="api-content container">
			<div id="options">
				<input type="radio" name="Area" id="LatANDLon" value="LatANDLon" />Latitude and Longitude
				<input type="radio" name="Area" id="Location" value="Location" />Location
				<br>
				<input type="text" name="Latitude" id="Latitude" value="Latitude" />
				<input type="text" name="Longitude" id="Longitude" value="Longitude" />
				<input type="text" name="Location" id="LocationText" value="Location" />
				<br>
				<input type="button" name="Submit" id="Submit" value="Submit" />

			</div>
			<div id="Weather">
				<img id="WeathImage" src="https://upload.wikimedia.org/wikipedia/commons/a/ac/No_image_available.svg">
				<div id="WeathText">

				</div>
			</div>
		</div>
	</div>

	<script>
		$(document).ready(function () {

			$("#Latitude").attr("disabled", "disabled");
			$("#Longitude").attr("disabled", "disabled");
			$("#LocationText").attr("disabled", "disabled");
			$("#Submit").attr("disabled", "disabled");

			$("#LatANDLon").click(function () {
				$("#LocationText").attr("disabled", "disabled");
				$("#Latitude").removeAttr('disabled');
				$("#Longitude").removeAttr('disabled');
				$("#Submit").removeAttr('disabled');
				document.getElementById("LocationText").value = "Location";
			});

			$("#Location").click(function () {
				$("#Latitude").attr("disabled", "disabled");
				$("#Longitude").attr("disabled", "disabled");
				$("#LocationText").removeAttr('disabled');
				$("#Submit").removeAttr('disabled');
				document.getElementById("Latitude").value = "Latitude";
				document.getElementById("Longitude").value = "Longitude";
			});



			$("#Submit").click(function () {
				//$('#WeathImage').width(300)
				//$('#WeathImage').height(300);
				if (document.getElementById('Location').checked) {
					var location = document.getElementById('LocationText').value;
					$.ajax({
						url: "http://api.apixu.com/v1/current.json?key=75fb86a2371f4abca12115412190403&q=" + location,
						success: function (data) {
							console.log(data);
							image = new Image();
							if (data.error) {
								image.src = "http://via.placeholder.com/64x64?text=%20"; // Error, so we use blank image for weather. See 'error:' below for another way to include a small blank image
							} else {
								document.getElementById("WeathImage").src = "http:" + data.current.condition.icon;
								//image.src = "http:" + data.current.condition.icon; // icon is specified within the data
								$('#WeathText').html(
									"<p>Last Updated: " + data.current.last_updated 
									+ "<br><br>" 
									+ "Location: " + data.location.name + "<br>Region: " + data.location.region + "<br>Country: " + data.location.country
									+ "<br><br>"
									+ "Weather: " + data.current.condition.text  + "<br>Visibility(Km):" + data.current.vis_km + "<br>Precipitation(mm):" + data.current.precip_mm
									+ "<br><br>"
									+ "Temperature(C):" + data.current.temp_c + "<br>Feels like Temperature(C):" + data.current.feelslike_c + "<br>Temperature(F):" + data.current.temp_f   + "<br>Feels like Temperature(F):" + data.current.feelslike_f
									+ "<br><br>"
									+ "Wind(Mph): " + data.current.wind_mph + "<br>Wind(Kph): " + data.current.wind_kph + "<br>Gusts(Mph): " + data.current.gust_mph + "<br>Gusts(Kph): " + data.current.gust_kph
									+ "</p>"
										
										/***
									+ data.location.name + " is " + data.current.condition.text + "<br> " + data.location
									.region + " " + data.location.country + " " + data.location.lat + " " + data.location.lon + 
									'</p>'
									***/
									); // current weather in text format

							}
						},
						error: function () { // Weather service could not provide weather for requested lat,lon world location
							image = new Image();
							// A local 64*64 transparent image. Generated from the useful site: http://png-pixel.com/
							image.src =
								"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAPElEQVR42u3OMQEAAAgDIJfc6BpjDyQgt1MVAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBgXbgARTAX8ECcrkoAAAAAElFTkSuQmCC";
							image.onload = function () {
								//set the image into the web page
								$('#weatherImage').empty().append(image);
							};
						}
					});
				};


				if (document.getElementById('LatANDLon').checked) {

					var latitude = document.getElementById('Latitude').value;
					var longitude = document.getElementById('Longitude').value;

					$.ajax({
						url: "http://api.apixu.com/v1/current.json?key=75fb86a2371f4abca12115412190403&q=" + latitude + "," +
							longitude,
						success: function (data) {
							console.log(data);
							image = new Image();
							if (data.error) {
								image.src = "http://via.placeholder.com/64x64?text=%20"; // Error, so we use blank image for weather. See 'error:' below for another way to include a small blank image
							} else {
								document.getElementById("WeathImage").src = "http:" + data.current.condition.icon;
								//image.src = "http:" + data.current.condition.icon; // icon is specified within the data
								$('#WeathText').html('<p> ' + data.current.condition.text + "<br> " + data.location.name + " " + data.location
									.region + " " + data.location.country + '</p>'); // current weather in text format

							}
						},
						error: function () { // Weather service could not provide weather for requested lat,lon world location
							image = new Image();
							// A local 64*64 transparent image. Generated from the useful site: http://png-pixel.com/
							image.src =
								"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAQAAAAAYLlVAAAAPElEQVR42u3OMQEAAAgDIJfc6BpjDyQgt1MVAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBgXbgARTAX8ECcrkoAAAAAElFTkSuQmCC";
							image.onload = function () {
								//set the image into the web page
								$('#weatherImage').empty().append(image);
							};
						}
					});
				};

			});
		});
	</script>

	<div id="navbar">
		<!--Import Navbar file onto page-->
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="js/navbar.js"></script>
	</div>

	<div id="footer">
		<!--Import Footer file onto page-->
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<script type="text/javascript" src="js/footer.js"></script>
	</div>
</body>

</html>